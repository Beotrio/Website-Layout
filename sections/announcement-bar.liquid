{%- if settings.show_announcement_bar -%}
  <div
    id="announcementBar"
    class="text-block"
    style="
      left: 50%;
      transform: translateX(-50%);
      z-index: 9999;
      border-radius: 24px;
      transition: all 0.3s ease;
      {% if settings.enable_large_announcement_bar %}
      height: 52px;
      {% endif %}
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: {{ settings.announcement_text_size }}px;
      background-color:
        {% if template == 'index' %}
          {{ settings.announcement_background_color_home_page }};
        {% elsif template == 'collection' %}
          {{ settings.announcement_background_color_collection_page }};
        {% elsif template == 'product' %}
          {{ settings.announcement_background_color_product_page }};
        {% else %}
          {{ settings.announcement_background_color }};
        {% endif %}
      color:
        {% if template == 'index' %}
          {{ settings.announement-text-color-home-page }};
        {% elsif template == 'collection' %}
          {{ settings.announement-text-color-collection-page }};
        {% elsif template == 'product' %}
          {{ settings.announement-text-color-product-page }};
        {% else %}
          {{ settings.announement-text-color }};
        {% endif %}
      position: absolute;
      top: 30px;
    "
  >
    <script>
      window.addEventListener('scroll', function () {
        var bar = document.getElementById('announcementBar');
        if (!bar) return;

        if (window.scrollY > 80) {
          bar.style.position = 'fixed';
          bar.style.top = '0px';
          bar.style.left = '0';
          bar.style.transform = 'none';
          bar.style.width = '100%';
          bar.style.borderRadius = '0';
        } else {
          bar.style.position = 'absolute';
          bar.style.top = '30px';
          bar.style.left = '50%';
          bar.style.transform = 'translateX(-50%)';
          bar.style.width = '';
          bar.style.borderRadius = '24px';
        }
      });
    </script>

    <p
      {% if settings.enable_moving_announcement %}
        class="marquee"
      {% endif %}
      style="margin-bottom: 0; --moving-scroll-speed: {{ settings.moving_txt_speed }}s;"
    >
      <span>{{ settings.announcement_text }}</span>
    </p>
  </div>
{%- endif -%}
